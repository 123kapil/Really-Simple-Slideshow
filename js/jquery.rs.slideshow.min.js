/**
* 	Really Simpleâ„¢ Slideshow jQuery plug-in 1.2
*	---------------------------------------------------------
*	Introduction, demos, docs, license, downloads, etc:
* 	http://reallysimpleworks.com/slideshow
*/


(function($){var defaults={interval:5,transition:1000,effect:'fade',easing:'swing',loop:true,autostart:true,slides:Array(),slide_container_class:'slide-container',slide_caption_class:'slide-caption',data_container:'ol.slides',slide_data_container:'li',slide_data_selectors:{url:{selector:'a',attr:'href'},caption:{selector:'a',attr:'title'},link_to:{selector:'a',attr:'data-link-to'},effect:{selector:'a',attr:'data-effect'}},play_pause_class:'rs-play-pause',prev_class:'rs-prev',next_class:'rs-next',stop_on_prev_next:true,index_class:'rs-index',stop_on_index:true,eventCallbacks:{rsStartShow:function(rssObj,e){var settings=$(rssObj).data('rsf_slideshow').settings;$('.'+settings.play_pause_class+'[data-control-for="'+$(rssObj).attr('id')+'"]').html('Pause').addClass('rss-playing');},rsStopShow:function(rssObj,e){var settings=$(rssObj).data('rsf_slideshow').settings;$('.'+settings.play_pause_class+'[data-control-for="'+$(rssObj).attr('id')+'"]').html('Play').addClass('rss-paused');}}};var methods={init:function(options){return this.each(function(){var self=this,$this=$(this),data=$this.data('rsf_slideshow'),slides=Array(),this_slide=0,effect_iterator={this_effect:-1,direction:1}
if(!data){var settings=$.extend(true,{},defaults);if(typeof options==='object'){$.extend(true,settings,options);};$this.data('rsf_slideshow',{slides:slides,this_slide:this_slide,effect_iterator:effect_iterator,settings:settings,interval_id:false,loaded_imgs:Array(),queued:0,callbacks:{}});}
$(this).rsfSlideshow('getSlidesFromMarkup');if(settings.slides.length){$this.rsfSlideshow('addSlides',settings.slides);settings.slides=Array();}
if(typeof settings.eventCallbacks==='object'){$.each(settings.eventCallbacks,function(evnt,fn){$this.bind(evnt,function(e){fn(this,e);});});}
if(settings.play_pause_class){$this.rsfSlideshow('bindPlayPause');}
if(settings.prev_class){$this.rsfSlideshow('bindPrevious');}
if(settings.next_class){$this.rsfSlideshow('bindNext');}
if(settings.index_class){$this.rsfSlideshow('bindIndex');}
if(settings.autostart){$this.rsfSlideshow('startShow');}});},addSlides:function(slides){if(slides instanceof Array){for(var i=0,len=slides.length;i<len;i++){this.rsfSlideshow('_addSlide',slides[i]);}}
else{this.rsfSlideshow('_addSlide',slides);}
return this;},startShow:function(interval,instant){var self=this;var data=this.data('rsf_slideshow');if(!data.interval_id){if(instant){self.rsfSlideshow('nextSlide');}
if(!interval){interval=data.settings.interval;}
data.interval_id=setInterval(function(){self.rsfSlideshow('nextSlide');},interval*1000);self.rsfSlideshow('_trigger','rsStartShow');}
return this;},stopShow:function(){var data=this.data('rsf_slideshow');if(data.interval_id){clearInterval(data.interval_id);data.interval_id=false;this.rsfSlideshow('_trigger','rsStopShow');}
return this;},toggleShow:function(){if(this.rsfSlideshow('isRunning')){this.rsfSlideshow('stopShow');}
else{this.rsfSlideshow('startShow');}},isRunning:function(){if(this.data('rsf_slideshow').interval_id){return true;}
return false;},currentSlideKey:function(){var data=this.data('rsf_slideshow');return data.this_slide;},totalSlides:function(){var data=this.data('rsf_slideshow');return data.slides.length;},getSlidesFromMarkup:function(options){var data=this.data('rsf_slideshow');if(!options){options={};}
if(!options.data_container){options.data_container=data.settings.data_container;}
if(options.data_container.charAt(0)==='#'){var $cntnr=$(options.data_container);}
else{var $cntnr=$(this).children(options.data_container);}
if(!$cntnr.length){return false;}
if(!options.slide_data_container){options.slide_data_container=data.settings.slide_data_container;}
var slide_data_selectors=$.extend(true,{},data.settings.slide_data_selectors);if(options.slide_data_selectors){$.extend(true,slide_data_selectors,options.slide_data_selectors);}
options.slide_data_selectors=slide_data_selectors;var self=this;$cntnr.children(options.slide_data_container).each(function(){var slide=$(self).rsfSlideshow('_findData',$(this),options.slide_data_selectors);$(self).rsfSlideshow('addSlides',slide);});return this;},_findData:function($slideData,slide_data_selectors){var slide={};var slide_attr;for(var key in slide_data_selectors){var $slideDataClone=$.extend(true,{},$slideData);if(slide_data_selectors[key].selector){$slideDataClone=$slideDataClone.children(slide_data_selectors[key].selector);}
if(slide_data_selectors[key].attr){slide_attr=$slideDataClone.attr(slide_data_selectors[key].attr);}
else{slide_attr=$slideDataClone.text();}
slide[key]=slide_attr;}
return slide;},_addSlide:function(slide){var data=this.data('rsf_slideshow');if((typeof slide)=='string'){url=$.trim(slide);data.slides.push({url:url});}
else if(slide.url){for(var key in slide){slide[key]=$.trim(slide[key]);}
data.slides.push(slide);}},nextSlide:function(){var data=this.data('rsf_slideshow');data.this_slide++;if(data.this_slide>=data.slides.length){if(data.settings.loop){data.this_slide=0;}
else{data.this_slide=data.slides.length-1;this.rsfSlideshow('stopShow');return this;}}
this.rsfSlideshow('showSlide',data.slides[data.this_slide]);return this;},previousSlide:function(){var data=this.data('rsf_slideshow');data.this_slide--;if(data.this_slide<0){if(data.settings.loop){data.this_slide=data.slides.length-1;}
else{data.this_slide=0;this.rsfSlideshow('stopShow');return this;}}
this.rsfSlideshow('showSlide',data.slides[data.this_slide]);return this;},goToSlide:function(key){var data=this.data('rsf_slideshow');if(typeof data.slides[key]==='object'){data.this_slide=key;this.rsfSlideshow('showSlide',data.slides[data.this_slide]);}
return this;},showSlide:function(slide,queue_id){var data=this.data('rsf_slideshow');if(!queue_id){data.queued+=1;queue_id=data.queued;this.rsfSlideshow('_trigger','rsPreTransition');}
else if(queue_id!=data.queued){return;}
var containerWidth=this.width();var containerHeight=this.height();this.children('img:first').css('z-index',0);var newImg=new Image();newImg.src=slide.url;var $this=this;var whenLoaded=function(img){var width=img.width;var height=img.height;if(!width||!height){setTimeout(function(){$this.rsfSlideshow('showSlide',slide,queue_id);},200);return;}
if($.inArray(slide.url,data.loaded_imgs)<0){data.loaded_imgs.push(slide.url);}
$this.rsfSlideshow('_trigger','rsImageReady');$(img).addClass('rsf-slideshow-image');var leftOffset=Math.ceil((containerWidth/2)-(width/2));var topOffset=Math.ceil((containerHeight/2)-(height/2));$(img).css({left:leftOffset});$(img).css({top:topOffset});if(slide.link_to){var $img=$('<a href="'+slide.link_to+'"></a>').append($(img));}
else{$img=$(img);}
var $slideEl=$('<div></div>');$slideEl.addClass(data.settings.slide_container_class);$slideEl.append($img).css('display','none');if(slide.caption){var $capt=$('<span>'+slide.caption+'</span>');$capt.addClass(data.settings.slide_caption_class);$capt.appendTo($slideEl);}
var effect=data.settings.effect;if(slide.effect){effect=slide.effect;}
$slideEl.appendTo($this);$this.rsfSlideshow('transitionWith',$slideEl,effect);return true;};if($.inArray(slide.url,data.loaded_imgs)<0){if(newImg.width){whenLoaded(newImg);}
else{$(newImg).bind('load',function(){whenLoaded(newImg);});}}
else{whenLoaded(newImg);}
return this;},transitionWith:function($slide,effect){var data=this.data('rsf_slideshow');var $this=this;var $previousSlide=this.children('div.'+data.settings.slide_container_class+':first');var effect_iteration='random';if(typeof effect==='object'&&effect.iteration&&effect.effects){effect_iteration=effect.iteration;effect=effect.effects;}
if(effect instanceof Array){switch(effect_iteration){case'loop':data.effect_iterator.this_effect++;if(data.effect_iterator.this_effect>effect.length-1){data.effect_iterator.this_effect=0;}
break;case'backAndForth':data.effect_iterator.this_effect+=data.effect_iterator.direction;if(data.effect_iterator.this_effect<0){data.effect_iterator.this_effect=1;data.effect_iterator.direction=data.effect_iterator.direction*-1;}
if(data.effect_iterator.this_effect>effect.length-1){data.effect_iterator.this_effect=effect.length-2;data.effect_iterator.direction=data.effect_iterator.direction*-1;}
break;default:data.effect_iterator.this_effect=Math.floor(Math.random()*effect.length);break;}
effect=effect[data.effect_iterator.this_effect];}
switch(effect){case'none':$slide.css('display','block');$this.rsfSlideshow('_endTransition');break;case'fade':$slide.fadeIn(data.settings.transition,function(){$this.rsfSlideshow('_endTransition');});break;case'slideLeft':var left_offset=$slide.outerWidth();this.rsfSlideshow('_doSlide',$slide,$previousSlide,left_offset,0);break;case'slideRight':var left_offset=(0-$slide.outerWidth());this.rsfSlideshow('_doSlide',$slide,$previousSlide,left_offset,0);break;case'slideUp':var top_offset=$slide.outerHeight();this.rsfSlideshow('_doSlide',$slide,$previousSlide,0,top_offset);break;case'slideDown':var top_offset=(0-$slide.outerHeight());this.rsfSlideshow('_doSlide',$slide,$previousSlide,0,top_offset);break;}},_endTransition:function(){var data=this.data('rsf_slideshow');this.children('div.'+data.settings.slide_container_class+':not(:last-child)').remove();this.rsfSlideshow('_trigger','rsPostTransition');if(this.rsfSlideshow('currentSlideKey')==this.rsfSlideshow('totalSlides')-1){this.rsfSlideshow('_trigger','rsLastSlide');}
else if(this.rsfSlideshow('currentSlideKey')==0){this.rsfSlideshow('_trigger','rsFirstSlide');}},_doSlide:function($slide,$previousSlide,left_offset,top_offset){var data=this.data('rsf_slideshow');var $this=this;$slide.css({top:top_offset,left:left_offset});$slide.css('display','block');$slide.stop().animate({top:0,left:0},data.settings.transition,data.settings.easing,function(){$this.rsfSlideshow('_endTransition');});$previousSlide.stop().animate({top:(0-top_offset),left:(0-left_offset)},data.settings.transition,data.settings.easing);},_trigger:function(e,event_data){var data=this.data('rsf_slideshow');if(typeof event_data!=='object'){event_data={};}
$.extend(event_data,{slide_key:data.this_slide,slide:data.slides[data.this_slide]});this.trigger(e,event_data);},bindPlayPause:function(class_name){var $self=this;var data=$self.data('rsf_slideshow');if(!class_name){class_name=data.settings.play_pause_class;}
$('.'+class_name+'[data-control-for="'+$self.attr('id')+'"]').bind('click.rsfSlideshow',function(e){e.preventDefault();$self.rsfSlideshow('toggleShow');});},bindPrevious:function(class_name,stop_show){var $self=this;var data=$self.data('rsf_slideshow');if(!class_name){class_name=data.settings.prev_class;}
if(!stop_show){stop_show=data.settings.stop_on_prev_next;}
$('.'+class_name+'[data-control-for="'+$self.attr('id')+'"]').bind('click.rsfSlideshow',function(e){e.preventDefault();$self.rsfSlideshow('previousSlide');if(stop_show){$self.rsfSlideshow('stopShow');}});},bindNext:function(class_name,stop_show){var $self=this;var data=$self.data('rsf_slideshow');if(!class_name){class_name=data.settings.next_class;}
if(!stop_show){stop_show=data.settings.stop_on_prev_next;}
$('.'+class_name+'[data-control-for="'+$self.attr('id')+'"]').bind('click.rsfSlideshow',function(e){e.preventDefault();$self.rsfSlideshow('nextSlide');if(stop_show){$self.rsfSlideshow('stopShow');}});},bindIndex:function(class_name,stop_show){var $self=this;var data=$self.data('rsf_slideshow');if(!class_name){class_name=data.settings.index_class;}
if(!stop_show){stop_show=data.settings.stop_on_index;}
$('.'+class_name+'[data-control-for="'+$self.attr('id')+'"]').bind('click.rsfSlideshow',function(e){e.preventDefault();var slide_key=$(this).attr('data-slide-key');if(slide_key){$self.rsfSlideshow('goToSlide',slide_key);if(stop_show){$self.rsfSlideshow('stopShow');}}});}};$.fn.rsfSlideshow=function(method){if(!this.length){return this;}
if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}
else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}
else{$.error('Method '+method+' does not exist on jQuery.rsfSlidehow');}};$.rsfSlideshow=function(options){$.extend(defaults,options);};})(jQuery);